<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Güniçi Hisse İşlemleri</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #ffffff;
            padding-bottom: 70px;
        }

        /* Üst Başlık */
        .header {
            background-color: #eaeaea;
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        .header h1 {
            flex: 1;
            text-align: center;
            font-size: 19px; 
            margin: 0;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
        }
        .back-icon { font-size: 20px; cursor: pointer; padding: 5px; display: flex; align-items: center; }

        /* Izgara Yapısı */
        .grid-layout {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr 1fr 1fr 1fr 0.8fr;
            align-items: center;
            text-align: right;
        }
        .grid-layout div:first-child { text-align: left; padding-left: 10px; }
        .grid-layout div { padding: 8px 4px; }

        .table-header-tabs {
            background-color: #eaeaea;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            text-align: center;
            border-bottom: 1px solid #ccc;
        }
        .table-header-tabs div {
            padding: 10px 0;
            font-size: 15px; 
            color: #666;
            font-weight: normal;
            cursor: pointer;
        }
        .table-header-tabs .active-tab {
            color: #000;
            border-bottom: 2px solid #000;
        }

        /* Sütun Başlıkları */
        .table-header {
            font-size: 13px; 
            color: #888;
            border-bottom: 1px solid #eee;
            background: #fff;
        }

        /* Hisse Satırları Genel Ayarlar */
        .portfolio-row {
            border-bottom: 1px solid #eee;
            font-size: 15px; 
            /* DEĞİŞİKLİK: Satırın genelini normal yapıyoruz */
            font-weight: normal; 
        }
        
        /* Renk Sınıfları */
        .row-buy { color: #5cb85c; }
        .row-sell { color: #d9534f; }

        /* DEĞİŞİKLİK: Sadece sembol (Hisse Adı) kalın olsun */
        .col-symbol {
            font-weight: bold;
            color: inherit;
        }

        /* Süre sütunu ve GÜN yazısı */
        .col-sure {
            font-weight: normal !important; 
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 2px;
        }
        .dots-svg {
            display: inline-block;
            vertical-align: middle;
            margin-left: 2px;
            color: rgb(82, 102, 134) !important;
        }

        /* Admin Paneli */
        #adminPanel {
            display: none;
            background: #f9f9f9;
            padding: 15px;
            border-bottom: 2px solid #ddd;
        }
        .form-row { display: flex; gap: 10px; margin-bottom: 8px; align-items: center; }
        .form-row label { width: 90px; font-size: 12px; font-weight: bold; }
        input, select { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; }
        
        .btn-group { display: flex; gap: 5px; margin-top: 10px; }
        button { flex: 1; padding: 10px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .btn-add { background-color: #2c3e50; color: white; }
        .btn-upd { background-color: #2980b9; color: white; }
        .btn-del { background-color: #c0392b; color: white; }

        /* Alt Navigasyon */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            background: #f8f8f8;
            padding: 10px 0;
            border-top: 1px solid #ddd;
            font-size: 11px; 
            color: #777;
        }
        .nav-item { text-align: center; flex: 1; }
        .active-nav { color: #000; }
    </style>
</head>
<body>

    <div class="header">
        <div class="back-icon" onclick="history.back()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="19" y1="12" x2="5" y2="12" />
              <polyline points="12 19 5 12 12 5" />
            </svg>
        </div>
        <h1 onclick="toggleAdminPanel()">Güniçi Hisse İşlemleri</h1>
    </div>

    <!-- Tablo Sekmeleri -->
    <div class="table-header-tabs">
        <div id="tab-bekleyen" class="active-tab" onclick="tabDegistir('bekleyen')">Bekleyen</div>
        <div id="tab-gerceklesen" onclick="tabDegistir('gerceklesen')">Gerçekleşen</div>
        <div id="tab-iptal" onclick="tabDegistir('iptal')">İptal</div>
    </div>

    <!-- Tablo Başlıkları -->
    <div class="table-header grid-layout">
        <div>Sembol</div>
        <div>A/S</div>
        <div>G.Adet</div>
        <div>Adet</div>
        <div>Fiyat</div>
        <div>Süre</div>
    </div>

    <!-- Tablo Veri Alanı -->
    <div id="hisseTableBody"></div>

    <!-- Admin Paneli (Yönetim) -->
    <div id="adminPanel">
        <div class="form-container">
            <div style="text-align: center; margin-bottom: 10px; font-weight: bold; color: #2c3e50;">
                Düzenlenen Sekme: <span id="currentTabName">Bekleyen</span>
            </div>
            <div class="form-row">
                <label>Hisse Seç:</label>
                <select id="hisseSelect" onchange="hisseSec()">
                    <option value="">Yeni Kayıt</option>
                </select>
            </div>
            <hr>
            <div class="form-row">
                <label>Sembol:</label>
                <input type="text" id="hisseAd" placeholder="Örn: THYAO">
            </div>
            <div class="form-row">
                <label>A/S:</label>
                <select id="as">
                    <option value="A">A</option>
                    <option value="S">S</option>
                </select>
            </div>
            <div class="form-row">
                <label>G.Adet:</label>
                <input type="number" id="gAdet" placeholder="0">
            </div>
            <div class="form-row">
                <label>Adet:</label>
                <input type="number" id="adet" placeholder="0">
            </div>
            <div class="form-row">
                <label>Fiyat:</label>
                <input type="number" id="fiyat" step="0.01" placeholder="0.00">
            </div>
            <div class="form-row">
                <label>Süre:</label>
                <select id="sure">
                    <option value="GÜN">GÜN</option>
                    <option value="KİE">KİE</option>
                </select>
            </div>

            <div class="btn-group">
                <button class="btn-add" onclick="ekleHisse()">Ekle</button>
                <button class="btn-upd" onclick="guncelleHisse()">Güncelle</button>
                <button class="btn-del" onclick="silHisse()">Sil</button>
            </div>
            <button class="btn-reset" onclick="verileriSifirla()">Bu Sekmeyi Sıfırla</button>
        </div>
    </div>

    <!-- Alt Navigasyon -->
    <div class="bottom-nav">
        <div class="nav-item"><svg width="25" height="25" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <line x1="8" y1="6" x2="21" y2="6"></line>
  <line x1="8" y1="12" x2="21" y2="12"></line>
  <line x1="8" y1="18" x2="21" y2="18"></line>
  <line x1="3" y1="6" x2="3.3" y2="6.3"></line>
  <line x1="3" y1="12" x2="3.3" y2="12.3"></line>
  <line x1="3" y1="18" x2="3.3" y2="18.3"></line>
  <line x1="3.3" y1="6" x2="3" y2="6.3"></line>
  <line x1="3.3" y1="12" x2="3" y2="12.3"></line>
  <line x1="3.3" y1="18" x2="3" y2="18.3"></line>
</svg><br>Ekranım</div>
        <div class="nav-item"><svg width="25" height="25" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <polyline points="21 14 18 14 16 9 12 23 9 0 6 14 2 14"></polyline><circle cx="23" cy="14" r="2" fill="none"></circle>

</svg><br>Piyasalar</div>
        <div class="nav-item"><svg width="25" height="25" viewBox="0 0 24 24" fill="none">
  <path d="M17 6H21V18C21 19.6569 19.6569 21 18 21H17" 
        stroke="#777" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />

  <polyline points="3,3 17,3 17,19 18,21 3,21 3,2.35" 
            stroke="#777" 
            fill="none" 
            stroke-width="1.5" stroke-linejoin="round"/>

  <rect x="5" y="6" width="4" height="4" rx="0.5" fill="#777"/>

  <line x1="10.5" y1="7" x2="14" y2="7" stroke="#777" stroke-width="1.5" stroke-linecap="round"/>
  <line x1="10.5" y1="9.5" x2="14" y2="9.5" stroke="#777" stroke-width="1.5" stroke-linecap="round"/>
  <line x1="5.5" y1="12" x2="14" y2="12" stroke="#777" stroke-width="1.5" stroke-linecap="round"/>
  <line x1="5.5" y1="14.5" x2="14" y2="14.5" stroke="#777" stroke-width="1.5" stroke-linecap="round"/>
  <line x1="5.5" y1="17" x2="14" y2="17" stroke="#777" stroke-width="1.5" stroke-linecap="round"/>
</svg>
<br>Haberler</div>
        <div class="nav-item active-nav"><svg width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M17 7V5C17 3.89543 16.1046 3 15 3H9C7.89543 3 7 3.89543 7 5V7H4C2.89543 7 2 7.89543 2 9V11H22V9C22 7.89543 21.1046 7 20 7H17ZM9 5H15V7H9V5Z" fill="currentColor"/>
  
  <path d="M2 12V18C2 19.1046 2.89543 20 4 20H20C21.1046 20 22 19.1046 22 18V12H15V13H9V12H2Z" fill="currentColor"/>
</svg><br>Portföyüm</div>
    </div>

<script>
    // Üç nokta SVG şablonu
    const DOTS_SVG = `
        <svg class="dots-svg" width="6" height="23" viewBox="0 0 6 23" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <circle cx="3" cy="3" r="2" />
            <circle cx="3" cy="11" r="2" />
            <circle cx="3" cy="19" r="2" />
        </svg>
    `;

    // Veri Yapısı: Her sekme için ayrı dizi
    let veriler = {
        bekleyen: [],
        gerceklesen: [],
        iptal: []
    };
    
    let aktifTab = 'bekleyen';
    const STORAGE_KEY = 'hisseler_gunici_v2';

    document.addEventListener('DOMContentLoaded', () => {
        const kayitli = localStorage.getItem(STORAGE_KEY);
        if (kayitli) {
            veriler = JSON.parse(kayitli);
            if (Array.isArray(veriler)) {
                veriler = { bekleyen: veriler, gerceklesen: [], iptal: [] };
            }
        }
        tabloyuGuncelle();
        hisseListesiniGuncelle();
    });

    function tabDegistir(tabName) {
        aktifTab = tabName;
        document.querySelectorAll('.table-header-tabs div').forEach(div => div.classList.remove('active-tab'));
        document.getElementById(`tab-${tabName}`).classList.add('active-tab');
        document.getElementById('currentTabName').textContent = tabName.charAt(0).toUpperCase() + tabName.slice(1);
        tabloyuGuncelle();
        hisseListesiniGuncelle();
        formuTemizle();
    }

    function toggleAdminPanel() {
        const panel = document.getElementById("adminPanel");
        panel.style.display = (panel.style.display === "block") ? "none" : "block";
    }

    function getFormVerileri() {
        let ad = document.getElementById("hisseAd").value.toUpperCase().trim();
        
        // İptal sekmesindeysek ve adın sonunda zaten (E) yoksa, (E) ekle
        if (aktifTab === 'iptal' && ad !== "" && !ad.endsWith("(E)")) {
            ad = ad + "(E)";
        }

        return {
            id: Date.now(),
            ad: ad,
            as: document.getElementById("as").value,
            gAdet: document.getElementById("gAdet").value || "0",
            adet: document.getElementById("adet").value || "0",
            fiyat: parseFloat(document.getElementById("fiyat").value || 0).toFixed(2),
            sure: document.getElementById("sure").value
        };
    }

    function ekleHisse() {
        const veri = getFormVerileri();
        if (!veri.ad) return alert("Lütfen sembol giriniz.");
        veriler[aktifTab].push(veri);
        kaydet();
    }

    function guncelleHisse() {
        const selectedId = document.getElementById("hisseSelect").value;
        if (!selectedId) return alert("Güncellemek için listeden bir kayıt seçin.");

        const index = veriler[aktifTab].findIndex(h => h.id == selectedId);
        if (index !== -1) {
            const yeniVeri = getFormVerileri();
            yeniVeri.id = parseInt(selectedId);
            veriler[aktifTab][index] = yeniVeri;
            kaydet();
        }
    }

    function silHisse() {
        const selectedId = document.getElementById("hisseSelect").value;
        if (!selectedId) return alert("Silmek için bir kayıt seçin.");
        veriler[aktifTab] = veriler[aktifTab].filter(h => h.id != selectedId);
        kaydet();
    }

    function kaydet() {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(veriler));
        tabloyuGuncelle();
        hisseListesiniGuncelle();
        formuTemizle();
    }

    function tabloyuGuncelle() {
        const tableBody = document.getElementById("hisseTableBody");
        tableBody.innerHTML = "";
        
        veriler[aktifTab].forEach((hisse) => {
            const asRowClass = hisse.as === "A" ? "row-buy" : "row-sell";
            const row = document.createElement("div");
            row.classList.add("portfolio-row", "grid-layout", asRowClass);
            
            const sureIcerik = hisse.sure === "GÜN" ? `GÜN${DOTS_SVG}` : hisse.sure;
            
            row.innerHTML = `
                <div class="col-symbol">${hisse.ad}</div>
                <div>${hisse.as}</div>
                <div>${hisse.gAdet}</div>
                <div>${hisse.adet}</div>
                <div>${hisse.fiyat}</div>
                <div class="col-sure">${sureIcerik}</div>
            `;
            tableBody.appendChild(row);
        });
    }

    function hisseListesiniGuncelle() {
        const select = document.getElementById("hisseSelect");
        select.innerHTML = '<option value="">Yeni Kayıt / Seçiniz</option>';
        veriler[aktifTab].forEach(h => {
            const option = document.createElement("option");
            option.value = h.id;
            option.textContent = `${h.ad} - ${h.as} (${h.fiyat})`;
            select.appendChild(option);
        });
    }

    function hisseSec() {
        const selectedId = document.getElementById("hisseSelect").value;
        if (!selectedId) {
            formuTemizle();
            return;
        }
        const hisse = veriler[aktifTab].find(h => h.id == selectedId);
        if (hisse) {
            document.getElementById("hisseAd").value = hisse.ad;
            document.getElementById("as").value = hisse.as;
            document.getElementById("gAdet").value = hisse.gAdet;
            document.getElementById("adet").value = hisse.adet;
            document.getElementById("fiyat").value = hisse.fiyat;
            document.getElementById("sure").value = hisse.sure;
        }
    }

    function formuTemizle() {
        document.getElementById("hisseAd").value = "";
        document.getElementById("as").value = "A";
        document.getElementById("gAdet").value = "";
        document.getElementById("adet").value = "";
        document.getElementById("fiyat").value = "";
        document.getElementById("sure").value = "GÜN";
        document.getElementById("hisseSelect").value = "";
    }

    function verileriSifirla() {
        if(confirm(`${aktifTab.toUpperCase()} sekmesindeki tüm veriler silinecek. Emin misiniz?`)) {
            veriler[aktifTab] = [];
            kaydet();
        }
    }
</script>

</body>
</html>

